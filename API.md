

# 链课堂——接口文档

## 1. 登录

### 1.1 微信登录

#### 1.1.1 简要描述

当微信的用户登录态无效时，会重新请求code，并返回token，用于之后的传输

#### 1.1.2 请求URL

#### 1.1.3 请求方式

GET

#### 1.1.4 请求参数

| 字段 | 说明         | 类型   | 备注                               | 是否必填 |
| ---- | ------------ | ------ | ---------------------------------- | -------- |
| code | 用户登录凭证 | String | wx.login()返回的code，有效期五分钟 | 是       |

#### 1.1.6 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | -------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |
| data       | 响应数据 | Object | 见下方描述                  | 是       |

data：

| 字段  | 说明     | 类型   | 备注 | 是否必填 |
| ----- | -------- | ------ | ---- | -------- |
| token | 请求令牌 | String | 无   | 是       |

## 2. 信息绑定

### 2.1 查询是否绑定信息

#### 2.1.1 简要描述

查询该用户是否已经绑定个人信息，判断是否需要填写信息

#### 2.1.2 请求URL

#### 2.1.3 请求方式

GET

#### 2.1.4 请求参数

| 字段  | 说明     | 类型   | 备注 | 是否必填 |
| ----- | -------- | ------ | ---- | -------- |
| token | 请求令牌 | String | 无   | 是       |

#### 2.1.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | -------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |
| data       | 响应数据 | Object | 见下方描述                  | 是       |

data：

| 字段         | 说明             | 类型    | 备注 | 是否必填 |
| ------------ | ---------------- | ------- | ---- | -------- |
| hasBoundInfo | 是否已经绑定信息 | Boolean | 无   | 是       |

### 2.2 查询可用课程

#### 2.2.1 简要描述

- 在填写信息后，查询用户的可用课程

#### 2.2.2 请求URL

#### 2.2.3 请求方式

GET

#### 2.2.4 请求参数

| 字段  | 说明     | 类型   | 备注 | 是否必填 |
| ----- | -------- | ------ | ---- | -------- |
| token | 请求令牌 | String | 无   | 是       |

#### 2.2.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | -------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |
| data       | 响应数据 | Object | 见下方描述                  | 是       |

data：

| 字段      | 说明           | 类型  | 备注                                     | 是否必填 |
| --------- | -------------- | ----- | ---------------------------------------- | -------- |
| classList | 可用的课程列表 | Array | 若未查到则返回空数组，数组元素见下方描述 | 是       |

classList：

| 字段 | 说明     | 类型   | 备注             | 是否必填 |
| ---- | -------- | ------ | ---------------- | -------- |
| id   | 课程id   | Number | 全局唯一的课程id | 是       |
| name | 课程名称 | String | 无               | 是       |

### 2.3 提交信息

#### 2.3.1 简要描述

- 检查格式后，提交用户绑定的信息，返回绑定结果

#### 2.3.2 请求URL

#### 2.3.3 请求方式

POST

#### 2.3.4 请求参数

| 字段    | 说明          | 类型   | 备注                         | 是否必填 |
| ------- | ------------- | ------ | ---------------------------- | -------- |
| token   | 请求令牌      | String | 无                           | 是       |
| name    | 用户姓名      | String | 无                           | 是       |
| number  | 用户学号\工号 | Number | 无                           | 是       |
| phone   | 用户手机号码  | Number | 无                           | 是       |
| classId | 课程id        | Number | 若是修改信息，则无需选择课程 | 否       |

#### 2.3.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | -------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |

## 3. 我的

### 3.1 查询个人信息

#### 3.1.1 简要描述

查询用户的个人信息用于展示

#### 3.1.2 请求URL

#### 3.1.3 请求方式

GET

#### 3.1.4 请求参数

| 字段  | 说明     | 类型   | 备注 | 是否必填 |
| ----- | -------- | ------ | ---- | -------- |
| token | 请求令牌 | String | 无   | 是       |

#### 3.1.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | -------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |
| data       | 响应数据 | Object | 见下方描述                  | 是       |

data：

| 字段      | 说明      | 类型   | 备注                   | 是否必填 |
| --------- | --------- | ------ | ---------------------- | -------- |
| name      | 姓名      | String | 无                     | 是       |
| phone     | 手机号码  | Number | 展示时会打码           | 是       |
| number    | 学号\工号 | Number | 无                     | 是       |
| school    | 学校      | String | 默认电子科技大学       | 否       |
| institute | 学院      | String | 默认信息与通信工程学院 | 否       |

## 4. 课程

### 4.1 查询已参加课程

#### 4.1.1 简要描述

查询用户已参加的课程

#### 4.1.2 请求URL

#### 4.1.3 请求方式

GET

#### 4.1.4 请求参数

| 字段  | 说明     | 类型   | 备注 | 是否必填 |
| ----- | -------- | ------ | ---- | -------- |
| token | 请求令牌 | String | 无   | 是       |

#### 4.1.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | -------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |
| data       | 响应数据 | Object | 见下方描述                  | 是       |

data：

| 字段      | 说明             | 类型  | 备注               | 是否必填 |
| --------- | ---------------- | ----- | ------------------ | -------- |
| classList | 用户已参加的课程 | Array | 数组内容见下方描述 | 是       |

classList：

| 字段  | 说明             | 类型   | 备注                              | 是否必填 |
| ----- | ---------------- | ------ | --------------------------------- | -------- |
| id    | 课程id           | Number | 全局唯一的课程id                  | 是       |
| name  | 课程名称         | String | 无                                | 是       |
| badge | 该课程中的消息数 | Number | 用于显示在小红点中，若没有则返回0 | 是       |

### 4.2 添加课程

#### 4.2.1 简要描述

用户自行添加新的课程

#### 4.2.2 请求URL

#### 4.2.3 请求方式

POST

#### 4.2.4 请求参数

| 字段    | 说明         | 类型   | 备注 | 是否必填 |
| ------- | ------------ | ------ | ---- | -------- |
| token   | 请求令牌     | String | 无   | 是       |
| code    | 课程代码     | String | 无   | 是       |
| name    | 课程名称     | String | 无   | 是       |
| teacher | 授课老师姓名 | String | 无   | 是       |

#### 4.2.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | -------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |

## 5. 作业

### 5.1 查询作业

#### 5.1.1 简要描述

根据课程id，查询与该用户相关的作业，包括“我的作业”和“批改作业”

#### 5.1.2 请求URL

#### 5.1.3 请求方式

GET

#### 5.1.4 请求参数

| 字段  | 说明     | 类型   | 备注 | 是否必填 |
| ----- | -------- | ------ | ---- | -------- |
| token | 请求令牌 | String | 无   | 是       |
| id    | 课程id   | Number | 无   | 是       |

#### 5.1.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | -------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |
| data       | 响应数据 | Object | 见下方描述                  | 是       |

data：

| 字段         | 说明     | 类型  | 备注               | 是否必填 |
| ------------ | -------- | ----- | ------------------ | -------- |
| homeworkList | 作业列表 | Array | 数组元素见下方描述 | 是       |

homeworkList：

| 字段     | 说明     | 类型   | 备注                                                         | 是否必填 |
| -------- | -------- | ------ | ------------------------------------------------------------ | -------- |
| id       | 作业id   | Number | 全局唯一                                                     | 是       |
| name     | 作业名字 | String | 无                                                           | 是       |
| type     | 作业类型 | Number | 0：我的作业；1：批改作业                                     | 是       |
| state    | 作业状态 | Number | -1：未完成已过期；0：未完成；1：已完成；2：已批改（自己的作业已经被批改） | 是       |
| deadline | 截止时间 | String | 格式：xxxx年xx月xx日xx:xx（state===2时不需要截止时间）       | 否       |
| postTime | 上传时间 | String | 格式同上                                                     | 是       |
| score    | 作业分数 | Number | 作业最终的总分，只有type==0且state===2的作业有分数           | 否       |

### 5.2 查询详细分数

#### 5.2.1 简要描述

已经批改的作业，根据作业id，查询详细的分数

#### 5.2.2 请求URL

#### 5.2.3 请求方式

GET

#### 5.2.4 请求参数

| 字段  | 说明     | 类型   | 备注 | 是否必填 |
| ----- | -------- | ------ | ---- | -------- |
| token | 请求令牌 | String | 无   | 是       |
| id    | 作业id   | Number | 无   | 是       |

#### 5.2.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | :------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |
| data       | 响应数据 | Object | 见下方描述                  | 是       |

data：

| 字段  | 说明     | 类型  | 备注                               | 是否必填 |
| ----- | -------- | ----- | ---------------------------------- | -------- |
| score | 详细分数 | Array | 二维数组，表示某个人对某个题的打分 | 是       |

### 5.3 查询已上传作业

#### 5.3.1 简要描述

已完成的作业，根据作业id，查询用户已经上传的作业的文件名，用户自行选择是否重新上传

#### 5.3.2 请求URL

#### 5.3.3 请求方式

GET

#### 5.3.4 请求参数

| 字段  | 说明     | 类型   | 备注 | 是否必填 |
| ----- | -------- | ------ | ---- | -------- |
| token | 请求令牌 | String | 无   | 是       |
| id    | 作业id   | Number | 无   | 是       |

#### 5.3.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | :------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |
| data       | 响应数据 | Object | 见下方描述                  | 是       |

data：

| 字段 | 说明         | 类型   | 备注 | 是否必填 |
| ---- | ------------ | ------ | ---- | -------- |
| name | 上传的文件名 | String | 无   | 是       |

### 5.4 上传作业

#### 5.4.1 简要描述

根据作业id，上传作业，文件大小限制为20M，格式为pdf，content-type为multipart/form-data

#### 5.4.2 请求URL

#### 5.4.3 请求方式

POST

#### 5.4.4 请求参数

| 字段     | 说明           | 类型   | 备注                                                | 是否必填 |
| -------- | -------------- | ------ | --------------------------------------------------- | -------- |
| token    | 请求令牌       | String | 无                                                  | 是       |
| filePath | 文件路径       | String | 要上传文件资源的路径 (本地路径)                     | 是       |
| name     | 文件对应的 key | String | 开发者在服务端可以通过这个 key 获取文件的二进制内容 | 是       |
| formData | 表单数据       | Object | HTTP 请求中其他额外的 form data，具体见下方描述     | 是       |

formData：

| 字段 | 说明   | 类型   | 备注 | 是否必填 |
| ---- | ------ | ------ | ---- | -------- |
| id   | 作业id | Number | 无   | 是       |

#### 5.4.5 返回参

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | :------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |

### 5.5 查看文件

#### 5.5.1 简要描述

根据作业id，查看对应的文件

#### 5.5.2 请求URL

#### 5.5.3 请求方式

GET

#### 5.5.4 请求参数

| 字段  | 说明     | 类型   | 备注 | 是否必填 |
| ----- | -------- | ------ | ---- | -------- |
| token | 请求令牌 | String | 无   | 是       |
| id    | 作业id   | Number | 无   | 是       |

#### 5.5.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | :------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |
| data       | 响应数据 | Object | 见下方描述                  | 是       |

data：

| 字段 | 说明     | 类型   | 备注 | 是否必填 |
| ---- | -------- | ------ | ---- | -------- |
| url  | 文件路径 | String | 无   | 是       |

### 5.6 提交成绩

#### 5.6.1 简要描述

根据作业id，提交对应的成绩

#### 5.6.2 请求URL

#### 5.6.3 请求方式

POST

#### 5.6.4 请求参数

| 字段  | 说明     | 类型   | 备注                       | 是否必填 |
| ----- | -------- | ------ | -------------------------- | -------- |
| token | 请求令牌 | String | 无                         | 是       |
| id    | 作业id   | Number | 无                         | 是       |
| score | 详细分数 | Array  | 一维数组，表示每一题的成绩 | 是       |

#### 5.6.5 返回参数

| 字段       | 说明     | 类型   | 备注                        | 是否必填 |
| ---------- | :------- | ------ | --------------------------- | -------- |
| statusCode | 状态码   | Number | 成功：200                   | 是       |
| message    | 状态信息 | String | 成功：ok<br/>失败：提示信息 | 是       |